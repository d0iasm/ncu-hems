function createPowerData(e,t,a,n){var r=[];if(0==n)for(var o=0;o<24;o++){for(var c=0,i=t;i<=a;i++)c+=e[i].hour[o];r.push(c)}else if(1==n)for(var o=0;o<31;o++){for(var c=0,i=t;i<=a;i++)c+=e[i].day[o];r.push(c)}else if(2==n)for(var o=0;o<12;o++){for(var c=0,i=t;i<=a;i++)c+=e[i].month[o];r.push(c)}return r}function calculatePercentage(e,t,a,n){for(var r=0,o=t;o<=a;o++)for(var c=0;c<31;c++)r+=e[o].day[c];var i=r/n*100;return[i,100-i]}function convertCost(){}function createXAxis(e){var t=[];if(0==e)for(var a=1;a<=24;a++){var n=a+"時";t.push(n)}else if(1==e)for(var a=1;a<=31;a++){var n=a+"日";t.push(n)}else if(2==e)for(var a=1;a<=12;a++){var n=a+"月";t.push(n)}return t}function createLine(e,t,a){new Chart(e,{type:"line",data:{labels:t,datasets:[{label:"電力（W）",backgroundColor:"#9cff57",borderColor:"#64dd17",data:a}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}function createDoughnut(e,t,a){new Chart(e,{type:"doughnut",data:{labels:t,datasets:[{backgroundColor:["#64dd17","#95a5a6"],data:a}]}})}function openModal(){var e=document.createElement("div"),t=document.getElementById("modal-content");e.setAttribute("id","modal-overlay"),e.setAttribute("onclick","closeModal()"),document.querySelector("body").appendChild(e),t.style.display="inline"}function closeModal(){var e=document.getElementById("modal-overlay");e.parentNode.removeChild(e),document.getElementById("modal-content").style.display="none"}function addSection(){var e=document.section.from.value,t=document.section.to.value;if(e&&t){if(e>t)return void window.alert("開始ナンバーは終了ナンバーより小さい数字を入力してください。");var a=document.querySelector(".menu"),n=document.createElement("li");n.classList.add("menu-item"),0==a.childElementCount&&n.classList.add("active"),n.setAttribute("onclick","addActive(event, true)"),n.innerHTML='<span class="cross" onclick="removeSection(event)">×</span><span class="from">'+e+'</span> ~ <span class="to">'+t+"</span>",a.appendChild(n),closeModal(),document.section.reset()}}function removeSection(e){var t=e.target.parentNode;t.parentNode.removeChild(t)}function addActive(e,t){removeActive(t),"LI"==e.target.tagName?e.target.classList.add("active"):e.target.parentNode.classList.add("active"),update()}function removeActive(e){if(e)var t=document.querySelectorAll(".menu-item");else var t=document.querySelectorAll(".unit");for(var a=0;a<t.length;a++)t[a].classList.remove("active")}function update(){var e=document.querySelector(".js");e.parentNode.removeChild(e);var t=document.createElement("script");t.classList.add("js"),t.type="text/javascript",t.src="./js/min/script.js",document.body.appendChild(t)}!function(){for(var e=[],t=1;t<=15;t++)e[t]={hour:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],day:[31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1],month:[1,2,3,4,5,6,7,8,9,10,11,12]};for(var a=document.querySelector(".menu-item.active"),t=0;t<a.children.length;t++)if(a.children[t].classList.contains("from"))var n=a.children[t].innerHTML;else if(a.children[t].classList.contains("to"))var r=a.children[t].innerHTML;for(var o=document.getElementById("power-usage"),c=document.querySelectorAll(".unit"),t=0;t<c.length;t++)if(c[t].classList.contains("active"))var i=createXAxis(t),s=createPowerData(e,parseInt(n),parseInt(r),t);createLine(o,i,s);var l=document.getElementById("daily-power-usage"),d=["今月の電気使用量","目標までの差"],u=5e3,v=calculatePercentage(e,parseInt(n),parseInt(r),u);document.getElementById("power-val").innerHTML=parseInt(v[0]),createDoughnut(l,d,v);var m=document.getElementById("power-cost"),p=["今月の使用料金","目標までの差額"],u=3e3,f=calculatePercentage(e,parseInt(n),parseInt(r),u);document.getElementById("cost-val").innerHTML=parseInt(f[0]),createDoughnut(m,p,f)}();